
카산드라는 단일 장애 지점없이 여러 노드에서 빅데이터 워크로드를 처리하도록 설계되었다.

카산드라의 아키텍처는 시스템과 하드웨어 장애가 발생할수 있다는 이해를 기반으로 한다.

카산드라는 클러스터의 모든 노드에 테이터가 분산되는 동종 노드에서 피어 투 피어 분산 시스템을 사용해서 오류 문제를 해결한다.

각 노드는 피어 투 피어 가십 통신 프로토콜을 사용해서 클러스터 전체에 자신과 다른 노드에 대한 상태 정보를 자주 교환한다.

각 노드에서 순차적으로 작성된 커밋 로그는 쓰기 활동을 캡처해서 데이터 내구성을 보장한다.

그런 다음 데이터가 인덱싱되고 다시 쓰기 캐시와 유사한 메모리내 구조에 기록된다.

메모리 구조가 가득 찰 때마다 데이터는 SSTables 데이터 파일의 디스크에 기록된다.

모든 쓰기는 클러스터 전체에 자동으로 분할되고 복제된다.

카산드라는 압축이라는 프로세스를 사용하여 주기적으로 SSTable을 통합하고 삭제 표시가 있는 오래된 데이터를 삭제한다.

클러스터 전체의 모든 데이터가 일관되게 유지되도록 다양한 복구 메커니즘이 사용된다.



카산드라는 분할 된 row 저장소 데이터베이스로, row는 필수 기본 키가 있는 테이블로 구성된다.

카산드라의 아키텍처는 권한이있는 모든 사용자가 모든 데이터 센터의 노드에 연결하고 CQL언어를 사용하여 데이터에 액세서 할 수 있도록한다.

사용 편의성을 위해 CQL은 SQL과 유사한 구문을 사용하며 테이블 데이터와 함께 작동한다.

개발자는 cqlsh, DevCenter, 애플리케이션 언어 용 드라이버를 통해 CQL에 액세스 할 수 있다.

일반적으로 클러스터에는 다양한 테이블로 구성된 애플리케이션 당 하나의 키 스페이스가 있다.



클라이언트 읽기 또는 쓰기 요청은 클러스터의 모든 노드로 보낼 수 있다

클라이언트가 요청으로 노드에 연결하면 해당 노드는 특정 클라이언트 작업에 대한 조정자 역할을한다.

코디네이터는 클라이언트 애플리케이션과 요청되는 데이터를 소유 한 노드 사이에서 프록시 역할을한다.

코디네이터는 클러스터가 구성된 방식에 따라 요청을 받아야하는 링의 노드를 결정합니다.

The coordinator determines which nodes in the ring should get the request based on how the cluster is configured.

based on : ~에 기반하여, ~에 근거하여





## Key Structures
### Node
데이터가 저장된 곳. 카산드라의 기본 인프라 구성 요소이다.

infrastructure : 인프라

### datacenter
관련 노드 모음. 데이터 센터는 물리적, 가상 데이터 센터가 될수있다. 다른 워크로드는 물리적 또는 가상의 별도 데이터를 센터를 사용해야 한다. 복제는 데이터 센터에서 설정한다. 별도의 데이터 센터를 사용하면 카산드라 트랜젝션이 다른 워크로드로의 영향을 받는 것을 방지하고 요청을 서로 가깝게 유지해서 지연 시간을 줄인다. 복제 요소에 따라 데이터를 여러 데이터 센터에 쓸 수 있다. 데이터 센터는 물리적 위치에 걸쳐서는 안된다.



collection : 관련
being --ed : 수동태
span : (얼마의 기간에) 걸치다 [걸쳐 이어지다]

### Cluster
클러스터는 하나 또는 여러 데이터 센터를 포함하고 있다. 물리적 위치들에 걸쳐있을 수 있다.


### Commit log
모든 데이터는 내구성을 위해서 커밋 로그에 먼저 기록된다. 모든 데이터가 SSTable로 플러시 된 후 보관, 삭제 또는 재활용 할 수 있다.

durability : 내구성


### SSTable : A sorted string table
정렬된 문자 테이블은 카산드라가 주기적으로 memtables를 쓰는 불변 데이터 파일이다.

SSTable들은 추가 전용이며 디스크에 순차적으로 저장되며 각 카산드라 테이블에 대해 유지된다.

periodically : 정기적으로
sequentially : 순차적으로


### CQL Table
테이블 행에서 가져온 정렬된 열 모음. 테이블은 열로 구성되며 기본 키가 있다.

consists of : ~로 구성된다



## Key components for configuring Cassandra (카산드라 구성을 위한 주요 구성 요소)

### Gossip
카산드라 클러스터의 다른 노드에 대한 위치 밀 상태 정보를 검색하고 공유하는 p2p 통신 프로토콜이다.
Gossip정보는 노드가 다시 시작될 때 즉시 사용할 수 있도록 각 노드에서 로컬로 유지된다.


### Partitioner
파티셔너는 데이터의 첫번째 복제본을 받을 노드와 클러스터의 다른 노드에 다른 복제본을 배포하는 방법을 결정한다.

데이터의 각 행은 파티션 키와 동일 할 수 있지만 다른 클러스터링 열도 포함 할 수있는 기본 키로 고유하게 식별된다.

파티셔너는 행의 기본 키에서 토큰을 파생하는 해시 함수이다.

파티셔너는 토큰 값을 사용하여 클러스터에서 해당 행의 복제본을 받는 노드를 결정한다.

Murmur3Partitioner는 새로운 카산드라 클러스터의 기본 파티셔닝 전략이며 거의 모든 경우에 새로운 클러스터에 적합한 선택이다.



파티셔너를 설정하고 각 노드의 num_tokens값을 노드에 할당해야한다.

할당하는 토큰의 수는 시스템 하드웨어 기능에 따라 다르다. 가상도느(vnode)를 사용하지 않는 경우에는 initial_token 설정을 사용해라.

- distribute : 살포하다, 분배하다, 배부하다


### Replication factor
클러스터 전체의 총 복제본 수이다. 복제 요소 1은 한노드에 각 행의 복사본이 하나만 있음을 의미한다.

복제 요소 2는 각 행의 복사본 두개를 의미하며 각 복사본은 다른 노드에 있다.

모든 복제본은 똑같이 중요하다; 기본 또는 마스터 복제본은 없다.

각 데이터 센터에 대한 복제 요소를 정의한다. 일반적으로 복제 전략은 클러스터의 노드 수보다 크게 설정해야 한다.



### Replica placement strategy
카산드라는 안정성과 내고장성(고장 허용 범위/fault tolerance)를 보장하기 위해 여러 노드에 데이터 복사본을 저장한다.

복제전략은 복제본을 배치 할 노드를 결정한다. 데이터의 첫 번째 복제본은 첫 번째 복제본이다. 독특한 의미를 갖지 않는다.

NetworkTopologyStrategy는 향후 확장이 필요할 때 여러 데이터 센터로 확장하는 것이 훨씬 쉽기 때문에 대부분의 배포에 적ㅇ극 권장된다.



키 스페이스를 생성할 때는, 복제본 배치 전략과 원하는 복제본 수를 정의해야 한다.

- ensure : 보장하다



### Snitch
스니치는 복제 전략이 복제본을 배치하는데 사용하는 데이터 센터 및 랙(토폴리지)에 머신 그룹을 정의한다.




---
The coordinator determines which nodes in the ring should get the request based on how the cluster is configured.

- based on : ~에 기반하여, ~에 근거하여

- collection : 관련

- being --ed : 수동태

- span : (얼마의 기간에) 걸치다 [걸쳐 이어지다]

- durability : 내구성

- ensure : 보장하다

- periodically : 정기적으로

- sequentially : 순차적으로

- consists of : ~로 구성된다

- distribute : 살포하다, 분배하다, 배부하다